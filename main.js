!function(){"use strict";function e(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function t(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var i=class{constructor(e){t(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),t(this,"_handleShadedClose",(e=>{e.target===e.currentTarget&&this.close()})),this._popupElement=document.querySelector(e),this.close=this.close.bind(this)}open(){this._popupElement.classList.add("modal_opened"),this.setEventListeners()}close(){this._popupElement.classList.remove("modal_opened"),this.removeEventListeners()}setEventListeners(){this._popupElement.addEventListener("mousedown",this._handleShadedClose),document.addEventListener("keyup",this._handleEscClose),this._closeButton=this._popupElement.querySelector(".modal__close-button"),this._closeButton.addEventListener("click",this.close)}removeEventListeners(){this._popupElement.removeEventListener("mousedown",this._handleShadedClose),document.removeEventListener("keyup",this._handleEscClose),this._closeButton.removeEventListener("click",this.close)}};var n=class extends i{constructor(e){let{popupSelector:t,handleFormSubmit:i}=e;var n,r,o;super(t),n=this,o=e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t)},(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r="_onSubmit"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popupForm=this._popupElement.querySelector(".modal__container"),this._handleFormSubmit=i,this._inputList=[...this._popupForm.querySelectorAll(".modal__container-input")]}_getInputValues(){const e={};for(const t of this._inputList)e[t.name]=t.value;return e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",this._onSubmit)}removeEventListeners(){super.removeEventListeners(),this._popupForm.removeEventListener("submit",this._onSubmit)}close(){this._popupForm.reset(),super.close()}};class r{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e._inputErrorClass,this._form=document.querySelector(t),this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){this._errorMessageElement=this._form.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageElement.textContent=e.validationMessage}_hideInputError(e){this._errorMessageElement=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageElement.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}toggleButtonState(){this._hasInvalidInput(this._inputElements)?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this.toggleButtonState(this._submitButton),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState(this._submitButton)}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}const o={inputSelector:".modal__container-input",submitButtonSelector:".modal__container-button",inactiveButtonClass:"modal__container-button_disabled",inputErrorClass:"modal__container-input_type_error"};const s=new class{constructor(e){let{userNameSelector:t,userJobSelector:i}=e;this._name=document.querySelector(t),this._job=document.querySelector(i)}getUserInfo(){return{name:this._name.textContent,about:this._job.textContent}}setUserInfo(e){let{name:t,about:i}=e;this._name.textContent=t,this._job.textContent=i}}({userNameSelector:".profile__info-name",userJobSelector:".profile__info-description"}),a=t=>{const i=new class{constructor(t,i,n){let{handleCardClick:r}=i;e(this,"_handleLikeButton",(()=>{this._cardLikeButton.classList.toggle("card__tab-button_filled")})),e(this,"_handleDeleteButton",(()=>{this._cardElement.remove(),this._cardElement=null})),this._name=t.name,this._link=t.link,this._handleCardClick=r,this._cardSelector=n}_setEventListeners(){this._cardLikeButton.addEventListener("click",this._handleLikeButton),this._cardDeleteButton.addEventListener("click",this._handleDeleteButton),this._imageElement.addEventListener("click",this._handleCardClick)}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){this._cardElement=this._getTemplate(),this._cardLikeButton=this._cardElement.querySelector(".card__tab-button"),this._imageElement=this._cardElement.querySelector(".card__image");const e=this._cardElement.querySelector(".card__tab-title");return this._cardDeleteButton=this._cardElement.querySelector(".card__delete-button"),this._imageElement.src=this._link,this._imageElement.alt=this._name,e.textContent=this._name,this._setEventListeners(),this._cardElement}}(t,{handleCardClick:()=>{u.open(t)}},"#card-template").getView();l.addItem(i)},l=new class{constructor(e,t){let{renderer:i}=e;this._renderer=i,this._container=document.querySelector(t)}renderItems(e){e.forEach(this._renderer)}addItem(e){this._container.prepend(e)}}({renderer:a},".cards__list"),u=new class extends i{constructor(e){super(e),this._previewImage=this._popupElement.querySelector(".modal-preview-image"),this._imageCaption=this._popupElement.querySelector(".modal-preview-description")}open(e){let{name:t,link:i}=e;this._previewImage.src=i,this._previewImage.alt=t,this._imageCaption.textContent=t,super.open()}}("#imageModal"),c=new n({popupSelector:"#editModal",handleFormSubmit:e=>{s.setUserInfo(e),c.close(),d.toggleButtonState()}}),m=new n({popupSelector:"#addModal",handleFormSubmit:e=>{a(e),m.close(),h.toggleButtonState()}}),d=new r(o,"#edit-profile-form"),h=new r(o,"#add-card-form");l.renderItems([{name:"Yosemite Valley",link:"https://images.unsplash.com/photo-1549221838-126dc3ebf29f?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1429&q=80"},{name:"Lake Louise",link:"https://images.unsplash.com/photo-1468437012950-7d4960be6383?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1541&q=80"},{name:"Bald Mountains",link:"https://images.unsplash.com/photo-1641785653036-9e04de2e4015?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2114&q=80"},{name:"Big Bend",link:"https://images.unsplash.com/photo-1576617839173-7c5960cb568c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1065&q=80"},{name:"Grand Canyon",link:"https://images.unsplash.com/photo-1575527048208-6475b441e0a0?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80"},{name:"Crater Lake",link:"https://images.unsplash.com/photo-1465067854253-edf4a67fef86?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80"}].reverse()),d.enableValidation(),h.enableValidation();const _=document.querySelector(".profile__info-button"),p=document.querySelector(".profile__button"),f=document.querySelector("#name"),b=document.querySelector("#description");_.addEventListener("click",(()=>{!function(){const e=s.getUserInfo();f.value=e.name,b.value=e.about}(),c.open()})),p.addEventListener("click",(()=>m.open()))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxHQUNYd0MsRUFBUW5ILFFBQ1JvSCxFQUFpQnpELG1CQUFtQixJQUlsQ3VELEVBQW9CLElBQUlqRixFQUFjK0IsRURWekIsc0JDV2JvRCxFQUFtQixJQUFJbkYsRUFBYytCLEVEVnpCLGtCQ1lsQm1DLEVBQWFNLFlEdERRLENBQ25CLENBQ0U1RSxLQUFNLGtCQUNOdUQsS0FBTSwrSkFFUixDQUNFdkQsS0FBTSxjQUNOdUQsS0FBTSxrS0FFUixDQUNFdkQsS0FBTSxpQkFDTnVELEtBQU0sa0tBRVIsQ0FDRXZELEtBQU0sV0FDTnVELEtBQU0sa0tBRVIsQ0FDRXZELEtBQU0sZUFDTnVELEtBQU0sa0tBRVIsQ0FDRXZELEtBQU0sY0FDTnVELEtBQU0sbUtDK0I0QmlDLFdBQ3RDSCxFQUFrQm5ELG1CQUNsQnFELEVBQWlCckQsbUJBRWpCLE1BQU11RCxFQUFvQmxILFNBQVNDLGNBQWMseUJBQzNDa0gsRUFBaUJuSCxTQUFTQyxjQUFjLG9CQUN4Q21ILEVBQW1CcEgsU0FBU0MsY0FBYyxTQUMxQ29ILEVBQW9CckgsU0FBU0MsY0FBYyxnQkFRakRpSCxFQUFrQnpHLGlCQUFpQixTQUFTLE1BTjVDLFdBQ0UsTUFBTTZHLEVBQWN4RCxFQUFTSyxjQUM3QmlELEVBQWlCMUYsTUFBUTRGLEVBQVk3RixLQUNyQzRGLEVBQWtCM0YsTUFBUTRGLEVBQVlsRCxLQUN4QyxDQUdFbUQsR0FFQVosRUFBU3hHLE1BQU0sSUFFakJnSCxFQUFlMUcsaUJBQWlCLFNBQVMsSUFBTXNHLEVBQVE1RyxRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9O1xuICB9XG5cbiAgX2hhbmRsZVNoYWRlZENsb3NlID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH07XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVTaGFkZWRDbG9zZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIik7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xuICB9XG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlU2hhZGVkQ2xvc2UpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwOyIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIFxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jb250YWluZXJcIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19jb250YWluZXItaW5wdXRcIildO1xuICB9XG5cbiAgX29uU3VibWl0ID0gKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChpbnB1dFZhbHVlcyk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcblxuICAgIGZvciAoY29uc3QgaW5wdXQgb2YgdGhpcy5faW5wdXRMaXN0KSB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX29uU3VibWl0KTtcbiAgfVxuXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5fb25TdWJtaXQpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG5cbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07IiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuX2lucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtRWxlbWVudCk7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xuICAgIHJldHVybiAhaW5wdXRMaXN0LmV2ZXJ5KChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0RWxlbWVudHMpKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5fc3VibWl0QnV0dG9uKTtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICBcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9zdWJtaXRCdXR0b24pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gIFxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxufVxuXG5leHBvcnQge0Zvcm1WYWxpZGF0b3J9OyIsImNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6ICdZb3NlbWl0ZSBWYWxsZXknLFxuICAgIGxpbms6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU0OTIyMTgzOC0xMjZkYzNlYmYyOWY/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE0MjkmcT04MCdcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMYWtlIExvdWlzZScsXG4gICAgbGluazogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDY4NDM3MDEyOTUwLTdkNDk2MGJlNjM4Mz9peGxpYj1yYi00LjAuMyZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTU0MSZxPTgwJ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ0JhbGQgTW91bnRhaW5zJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2NDE3ODU2NTMwMzYtOWUwNGRlMmU0MDE1P2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0yMTE0JnE9ODAnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnQmlnIEJlbmQnLFxuICAgIGxpbms6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU3NjYxNzgzOTE3My03YzU5NjBjYjU2OGM/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTEwNjUmcT04MCdcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdHcmFuZCBDYW55b24nLFxuICAgIGxpbms6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU3NTUyNzA0ODIwOC02NDc1YjQ0MWUwYTA/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTEwNzQmcT04MCdcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdDcmF0ZXIgTGFrZScsXG4gICAgbGluazogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDY1MDY3ODU0MjUzLWVkZjRhNjdmZWY4Nj9peGxpYj1yYi00LjAuMyZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTQ3MCZxPTgwJ1xuICB9XG5dO1xuXG5jb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19jb250YWluZXItaW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19jb250YWluZXItYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2NvbnRhaW5lci1idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19jb250YWluZXItaW5wdXRfdHlwZV9lcnJvclwiLFxufTtcblxuY29uc3Qgc2VsZWN0b3JzID0ge1xuICBjYXJkVGVtcGxhdGU6IFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgY2FyZExpc3Q6IFwiLmNhcmRzX19saXN0XCIsXG4gIGVkaXRQb3B1cDogXCIjZWRpdE1vZGFsXCIsXG4gIGFkZFBvcHVwOiBcIiNhZGRNb2RhbFwiLFxuICBwcm9maWxlTmFtZTogXCIucHJvZmlsZV9faW5mby1uYW1lXCIsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbjogXCIucHJvZmlsZV9faW5mby1kZXNjcmlwdGlvblwiLFxuICBlZGl0Rm9ybUVsZW1lbnQ6IFwiI2VkaXQtcHJvZmlsZS1mb3JtXCIsXG4gIGFkZEZvcm1FbGVtZW50OiBcIiNhZGQtY2FyZC1mb3JtXCIsXG4gIHByZXZpZXdJbWFnZTogXCIjaW1hZ2VNb2RhbFwiXG59XG5cbmV4cG9ydCB7aW5pdGlhbENhcmRzLCB2YWxpZGF0aW9uU2V0dGluZ3MsIHNlbGVjdG9yc307IiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IHtGb3JtVmFsaWRhdG9yfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQge2luaXRpYWxDYXJkcywgdmFsaWRhdGlvblNldHRpbmdzLCBzZWxlY3RvcnN9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWVTZWxlY3Rvcjogc2VsZWN0b3JzLnByb2ZpbGVOYW1lLFxuICB1c2VySm9iU2VsZWN0b3I6IHNlbGVjdG9ycy5wcm9maWxlRGVzY3JpcHRpb25cbn0pO1xuXG5jb25zdCByZW5kZXJDYXJkID0gKGl0ZW0pID0+IHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGl0ZW0sIHtcbiAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcbiAgICAgIGltYWdlUG9wdXAub3BlbihpdGVtKTtcbiAgICB9XG4gIH0sIHNlbGVjdG9ycy5jYXJkVGVtcGxhdGUpO1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2V0VmlldygpO1xuICBjYXJkUmVuZGVyZXIuYWRkSXRlbShjYXJkRWxlbWVudCk7XG59XG5cbmNvbnN0IGNhcmRSZW5kZXJlciA9IG5ldyBTZWN0aW9uKHtcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcbiAgfSxcbiAgc2VsZWN0b3JzLmNhcmRMaXN0XG4pO1xuXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9ycy5wcmV2aWV3SW1hZ2UpO1xuXG5jb25zdCBlZGl0Rm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHsgXG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5lZGl0UG9wdXAsIFxuICBoYW5kbGVGb3JtU3VibWl0OiAodmFsdWVzKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odmFsdWVzKTtcbiAgICBlZGl0Rm9ybS5jbG9zZSgpO1xuICAgIGVkaXRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIH1cbn0pO1xuY29uc3QgYWRkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLmFkZFBvcHVwLCBcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGl0ZW0pID0+IHtcbiAgICByZW5kZXJDYXJkKGl0ZW0pO1xuICAgIGFkZEZvcm0uY2xvc2UoKTtcbiAgICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIH1cbn0pO1xuXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgc2VsZWN0b3JzLmVkaXRGb3JtRWxlbWVudCk7XG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBzZWxlY3RvcnMuYWRkRm9ybUVsZW1lbnQpO1xuXG5jYXJkUmVuZGVyZXIucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzLnJldmVyc2UoKSk7XG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2luZm8tYnV0dG9uXCIpO1xuY29uc3QgYWRkUG9wdXBCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWVcIik7XG5jb25zdCBwcm9maWxlQWJvdXRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb25cIik7XG5cbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSgpIHtcbiAgY29uc3QgcHJvZmlsZUluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZUluZm8ubmFtZTtcbiAgcHJvZmlsZUFib3V0SW5wdXQudmFsdWUgPSBwcm9maWxlSW5mby5hYm91dDtcbn1cblxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZmlsbFByb2ZpbGVGb3JtKCk7XG4gIFxuICBlZGl0Rm9ybS5vcGVuKCk7XG59KTtcbmFkZFBvcHVwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhZGRGb3JtLm9wZW4oKSk7IiwiY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJKb2JTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySm9iU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fam9iLnRleHRDb250ZW50XG4gICAgfVxuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fam9iLnRleHRDb250ZW50ID0gYWJvdXRcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbzsiLCJjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoIGRhdGEsIHsgaGFuZGxlQ2FyZENsaWNrIH0sIGNhcmRTZWxlY3RvciApIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbik7XG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKTtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNhcmRDbGljayk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUJ1dHRvbiA9ICgpID0+IHtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fdGFiLWJ1dHRvbl9maWxsZWRcIik7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQnV0dG9uID0gKCkgPT4ge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190YWItYnV0dG9uXCIpO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgY29uc3QgY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190YWItdGl0bGVcIik7XG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDsiLCJjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcyhpdGVtcykge1xuICAgIGl0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjsiLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1wcmV2aWV3LWltYWdlXCIpO1xuICAgIHRoaXMuX2ltYWdlQ2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLXByZXZpZXctZGVzY3JpcHRpb25cIik7XG4gIH1cblxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5faW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7Il0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwicG9wdXBTZWxlY3RvciIsImV2ZW50Iiwia2V5IiwidGhpcyIsImNsb3NlIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIl9wb3B1cEVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJiaW5kIiwib3BlbiIsImNsYXNzTGlzdCIsImFkZCIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZVNoYWRlZENsb3NlIiwiX2hhbmRsZUVzY0Nsb3NlIiwiX2Nsb3NlQnV0dG9uIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwicHJldmVudERlZmF1bHQiLCJpbnB1dFZhbHVlcyIsIl9nZXRJbnB1dFZhbHVlcyIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3BvcHVwRm9ybSIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJfb25TdWJtaXQiLCJyZXNldCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Zvcm0iLCJfaW5wdXRFbGVtZW50cyIsIl9zdWJtaXRCdXR0b24iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJfZXJyb3JNZXNzYWdlRWxlbWVudCIsImlkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsImlucHV0TGlzdCIsImV2ZXJ5IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJkaXNhYmxlZCIsIl9zZXRFdmVudExpc3RlbmVycyIsImZvckVhY2giLCJlbmFibGVWYWxpZGF0aW9uIiwidmFsaWRhdGlvblNldHRpbmdzIiwiaW5wdXRFcnJvckNsYXNzIiwidXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckpvYlNlbGVjdG9yIiwiX25hbWUiLCJfam9iIiwiZ2V0VXNlckluZm8iLCJhYm91dCIsInNldFVzZXJJbmZvIiwicmVuZGVyQ2FyZCIsIml0ZW0iLCJjYXJkRWxlbWVudCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJfY2FyZExpa2VCdXR0b24iLCJ0b2dnbGUiLCJfY2FyZEVsZW1lbnQiLCJfbGluayIsImxpbmsiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2NhcmREZWxldGVCdXR0b24iLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiX2ltYWdlRWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3IiwiY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwiaW1hZ2VQb3B1cCIsImNhcmRSZW5kZXJlciIsImFkZEl0ZW0iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbXMiLCJlbGVtZW50IiwicHJlcGVuZCIsIl9wcmV2aWV3SW1hZ2UiLCJfaW1hZ2VDYXB0aW9uIiwiZWRpdEZvcm0iLCJQb3B1cFdpdGhGb3JtIiwidmFsdWVzIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtIiwiYWRkRm9ybVZhbGlkYXRvciIsInJldmVyc2UiLCJlZGl0UHJvZmlsZUJ1dHRvbiIsImFkZFBvcHVwQnV0dG9uIiwicHJvZmlsZU5hbWVJbnB1dCIsInByb2ZpbGVBYm91dElucHV0IiwicHJvZmlsZUluZm8iLCJmaWxsUHJvZmlsZUZvcm0iXSwic291cmNlUm9vdCI6IiJ9